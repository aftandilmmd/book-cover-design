<!DOCTYPE html>
<html class="h-screen" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Book Cover Design</title>
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">

</head>
<body class="h-screen bg-gray-200 flex">

    <div class="w-2/12 bg-white shadow-lg h-full p-5">
        
        <div class="mb-5">
            <label class="block mb-2" for="book-name">Kitap adı:</label>
            <div class="flex">
                <input oninput="updateContent(this)" data-target=".book-name" name="book-name" id="book-name" type="text" class="px-5 py-2 border border-gray-300 rounded w-full h-full mr-2">
                <input oninput="updateContent(this)" data-target=".book-name" type="color" class="h-10">
            </div>
        </div>

        <div class="mb-5">
            <label class="block mb-2" for="writer-name">Yazar adı:</label>
            <div class="flex">
                <input oninput="updateContent(this)" data-target=".writer-name" id="writer-name" type="text" class="px-5 py-2 border border-gray-300 rounded w-full h-full mr-2">
                <input oninput="updateContent(this)" data-target=".writer-name" type="color" class="h-10">
            </div>
        </div>

        <div class="mb-5">
            <label class="block mb-2" for="publisher">Yayınevi:</label>
            <div class="flex">
                <input oninput="updateContent(this)" data-target=".publisher" id="publisher" type="text" class="px-5 py-2 border border-gray-300 rounded w-full h-full mr-2">
                <input oninput="updateContent(this)" data-target=".publisher" type="color" class="h-10">
            </div>
        </div>

        <div class="mb-5">
            <label class="block mb-2" for="publish-count">Baskı sayı:</label>
            <div class="flex">
                <input oninput="updateContent(this)" data-target=".publish-count" id="publish-count" type="text" class="px-5 py-2 border border-gray-300 rounded w-full h-full mr-2">
                <input oninput="updateContent(this)" data-target=".publish-count" type="color" class="h-10">
            </div>
        </div>

        <div class="mb-5">
            <label class="block mb-2" for="publish-year">Baskı Yılı:</label>
            <div class="flex">
                <input oninput="updateContent(this)" data-target=".publish-year" id="publish-year" type="number" class="px-5 py-2 border border-gray-300 rounded w-full h-full mr-2">
                <input oninput="updateContent(this)" data-target=".publish-year" type="color" class="h-10">
            </div>
        </div>

        <div class="mb-5">
            <label class="block mb-2" for="image">Kapak resim:</label>
            <div class="flex">
                <input onchange="updateBackground(this)" name="image" id="image" type="file" class="px-5 py-2 border border-gray-300 rounded w-full h-full">
            </div>
        </div>

    </div>

    <div class="w-10/12 p-5 flex items-center h-full">
        
        <div class="cover relative flex flex-col bg-white shadow-xl mx-auto" style="width: 600px; height: 900px;">
            
            <div class="writer-name text-lg font-semibold mx-auto mt-8"></div>

            <div class="book-name text-5xl m-auto p-5"></div>

            <div class="flex justify-between p-6 font-semibold">
                <div class="publisher"></div>
                <div class="publish-year"></div>
                <div class="publish-count"></div>
            </div>

        </div>
    
    </div>
    

    <script>

        function el( selector ){

            var items = document.querySelectorAll( selector );

            if( items.length == 1){
                return items[0];
            }

            return items;
        }

        function getData(input) {

            return new Promise(function(resolve, reject){

                if (input.files && input.files[0]) {

                    var reader = new FileReader();

                    reader.readAsDataURL( input.files[0] );

                    reader.onload = e => resolve( e.target.result );

                }

            });

        }

        function updateBackground( image ){

            var cover = el(".cover");

            getData( image ).then( data => {
                cover.style.backgroundImage     = "url("+ data +")";
                cover.style.backgroundPosition  = "center";
                cover.style.backgroundSize      = "cover";
            });
        }

        function updateContent( element ){
            var target = el( element.dataset.target ); // data-target=".classname"
            if(element.type == "color"){
                target.style.color = element.value;
            }else{
                target.innerText = element.value;
            }
        }
        
    </script>
    
</body>
</html>
